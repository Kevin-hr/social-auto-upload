@use './reset.scss';
@use './variables.scss' as *;

/* ============================================
   PostHog Inspired Retro-OS Design System
   ============================================ */

body {
  background-color: $bg-paper;
  color: $text-primary;
  font-family: $font-body;
  -webkit-font-smoothing: antialiased;
  position: relative;
  overflow-x: hidden;

  // 纸张纹理叠加
  &::before {
    content: "";
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: url('@/assets/paper-texture.png');
    background-repeat: repeat;
    opacity: 0.15;
    pointer-events: none;
    z-index: 9999;
  }
}

// 经典的 PostHog 网格背景
.grid-background {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-image:
    linear-gradient(rgba(0, 0, 0, 0.05) 1px, transparent 1px),
    linear-gradient(90deg, rgba(0, 0, 0, 0.05) 1px, transparent 1px);
  background-size: 32px 32px;
  pointer-events: none;
  z-index: 0;
}

// 光晕效果
.glow-orb {
  position: fixed;
  width: 400px;
  height: 400px;
  border-radius: 50%;
  filter: blur(100px);
  pointer-events: none;
  z-index: 0;
  opacity: 0.5;
  animation: float 20s ease-in-out infinite;
}

.glow-orb-1 {
  top: -100px;
  right: -100px;
  background: radial-gradient(circle, rgba(255, 196, 0, 0.6) 0%, transparent 70%);
}

.glow-orb-2 {
  bottom: -150px;
  left: -150px;
  background: radial-gradient(circle, rgba(99, 102, 241, 0.4) 0%, transparent 70%);
  animation-delay: -10s;
}

@keyframes float {
  0%, 100% {
    transform: translate(0, 0) scale(1);
  }
  25% {
    transform: translate(30px, 30px) scale(1.1);
  }
  50% {
    transform: translate(-20px, 50px) scale(0.9);
  }
  75% {
    transform: translate(50px, -30px) scale(1.05);
  }
}

// 深色主题
.theme-dark {
  body {
    background-color: $bg-dark-paper;
    color: $text-dark-primary;

    &::before {
      opacity: 0.05;
    }
  }

  .grid-background {
    background-image:
      linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px),
      linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
  }

  .retro-sidebar {
    background: $bg-dark-paper;
    border-color: $border-dark;
  }

  .retro-window {
    background: $bg-dark-window;
    border-color: $border-dark;
    box-shadow: $shadow-block-dark;
  }

  .nav-item-retro {
    color: $text-dark-primary;

    &:hover {
      background: rgba(255, 255, 255, 0.05);
      border-color: $border-dark;
    }

    &.active {
      background: $primary-color;
      border-color: $border-dark;
      color: #000;
    }
  }

  .nav-badge-retro {
    background: $border-dark;
    color: #000;
  }

  .user-avatar-retro {
    background: $border-dark !important;
    color: #000 !important;
  }

  .header-breadcrumb {
    color: $text-dark-primary;
  }

  .sidebar-header,
  .sidebar-footer,
  .collapse-btn-retro,
  .theme-toggle-btn {
    border-color: $border-dark;
  }

  .block-btn {
    background: $bg-dark-window;
    border-color: $border-dark;
    box-shadow: $shadow-block-dark;
    color: $text-dark-primary;

    &:hover {
      background: $primary-color;
      border-color: #000;
    }
  }

  .status-dot {
    background: $success-color;
    border-color: $border-dark;
  }
}

// 基础过渡 (更利落)
.fade-enter-active,
.fade-leave-active {
  transition: opacity $transition-fast ease;
}

.fade-enter-from,
.fade-leave-to {
  opacity: 0;
}

// 实用工具类 - 复古加粗
.flex-center {
  display: flex;
  justify-content: center;
  align-items: center;
}

.flex-between {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.flex-col {
  display: flex;
  flex-direction: column;
}

.w-full {
  width: 100%;
}

.h-full {
  height: 100%;
}

// 经典 PostHog 窗口/卡片
.retro-window {
  background: $bg-window;
  border: $border-main;
  box-shadow: $shadow-block-md;
  transition: all $transition-fast;

  &:hover {
    transform: translate(-2px, -2px);
    box-shadow: $shadow-block-lg;
  }
}

// 块状按钮
.block-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: $spacing-sm $spacing-lg;
  background: $bg-white;
  border: $border-main;
  box-shadow: $shadow-block-sm;
  font-weight: bold;
  cursor: pointer;
  user-select: none;
  transition: all $transition-fast;

  &:hover {
    transform: translate(-1px, -1px);
    box-shadow: $shadow-block-md;
    background: $primary-color;
  }

  &:active {
    transform: translate(2px, 2px);
    box-shadow: 0 0 0 $border-color;
  }
}

// 等宽数字
.mono-numbers {
  font-family: $font-mono;
  font-weight: bold;
}

// Element Plus 复古化覆盖
.el-card {
  --el-card-bg-color: #{$bg-window};
  --el-card-border-color: #{$border-color};
  border: $border-main !important;
  border-radius: $radius-none !important;
  box-shadow: $shadow-block-sm !important;
}

.el-button--primary {
  --el-button-bg-color: #{$primary-color} !important;
  --el-button-border-color: #{$border-color} !important;
  --el-button-text-color: #{$text-primary} !important;
  --el-button-hover-bg-color: #{$primary-hover} !important;
  --el-button-active-bg-color: #{$primary-active} !important;
  border-width: $border-width !important;
  font-weight: bold !important;
  border-radius: $radius-none !important;
  box-shadow: $shadow-block-sm;

  &:hover {
    transform: translate(-1px, -1px);
    box-shadow: $shadow-block-md;
  }

  &:active {
    transform: translate(1px, 1px);
    box-shadow: none;
  }
}

.el-menu {
  border-right: none !important;
  background: transparent !important;

  .el-menu-item {
    font-weight: bold;
    border: $border-light;
    margin-bottom: $spacing-sm;
    transition: all $transition-fast;

    &:hover,
    &.is-active {
      background: $primary-color !important;
      color: $text-primary !important;
      border: $border-main;
      transform: translateX(4px);
    }
  }
}

.el-input__wrapper {
  background: $bg-white !important;
  border: $border-main !important;
  box-shadow: none !important;
  border-radius: $radius-none !important;

  &.is-focus {
    background: #fffbe6 !important;
  }
}

.el-dialog {
  border: $border-main !important;
  border-radius: $radius-none !important;
  box-shadow: $shadow-block-lg !important;
  background: $bg-paper !important;
}

.el-table {
  border: $border-main !important;

  th.el-table__cell {
    background-color: $bg-sidebar !important;
    color: $text-primary !important;
    font-weight: bold !important;
    border-bottom: $border-main !important;
  }

  td.el-table__cell {
    border-bottom: $border-light !important;
  }
}

.el-tag {
  border: $border-light !important;
  border-radius: $radius-none !important;
  font-weight: bold;
  color: $text-primary !important;
}